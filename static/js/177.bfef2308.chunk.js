"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[177],{177:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var n=t(43),i=t(579);const r=function(e){let{user:s,allUsers:t}=e;const[r,a]=(0,n.useState)([]),[d,l]=(0,n.useState)(""),[c,o]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("messages"))||[];a(e)}),[]);const u=r.filter((e=>e.senderId===s.id||e.recipientId===s.id));return(0,i.jsxs)("div",{className:"messaging",children:[(0,i.jsx)("h2",{children:"\u30e1\u30c3\u30bb\u30fc\u30b8"}),(0,i.jsx)("div",{className:"message-list",children:u.map((e=>(0,i.jsxs)("div",{className:"message ".concat(e.senderId===s.id?"sent":"received"),children:[(0,i.jsxs)("p",{children:[e.senderId===s.id?e.recipientName:e.senderName,": ",e.content]}),(0,i.jsx)("small",{children:new Date(e.timestamp).toLocaleString()})]},e.id)))}),(0,i.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),""===d.trim()||!c)return;const n={id:Date.now(),senderId:s.id,senderName:s.username,recipientId:c,recipientName:t.find((e=>e.id===c)).username,content:d,timestamp:(new Date).toISOString()},i=[...r,n];a(i),localStorage.setItem("messages",JSON.stringify(i)),l("")},children:[(0,i.jsxs)("select",{value:c,onChange:e=>o(e.target.value),required:!0,children:[(0,i.jsx)("option",{value:"",children:"\u53d7\u4fe1\u8005\u3092\u9078\u629e"}),t.filter((e=>e.id!==s.id)).map((e=>(0,i.jsx)("option",{value:e.id,children:e.username},e.id)))]}),(0,i.jsx)("input",{type:"text",value:d,onChange:e=>l(e.target.value),placeholder:"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b",required:!0}),(0,i.jsx)("button",{type:"submit",children:"\u9001\u4fe1"})]})]})}}}]);
//# sourceMappingURL=177.bfef2308.chunk.js.map